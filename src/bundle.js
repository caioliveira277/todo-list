"use strict";function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(c):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}var todoList=document.querySelector("#todo-list"),todoInput=document.querySelector("#todo-input"),todoButton=document.querySelector("#todo-button"),filterOption=document.querySelector("#filter-todo"),songs=document.querySelectorAll("audio");function PlaySong(a){songs.forEach(function(b){b.getAttribute("data-type")===a&&(b.currentTime=.2,b.play())})}function UpdateTitle(){var a=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],b=parseInt(document.title);if(!0===a)document.title="".concat(b+1," Open tasks");else{if(0===b)return;document.title="".concat(b+-1," Open tasks")}}function CreateTodoDiv(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],c=document.createElement("div");c.classList.add("todo");var d=document.createElement("li");d.innerText=a,d.classList.add("todo-item");var e=document.createElement("button");e.innerHTML="<i class='material-icons'>check</i>",e.setAttribute("data-action","completed");var f=document.createElement("button");return f.innerHTML="<i class='material-icons'>delete</i>",f.setAttribute("data-action","delete"),c.appendChild(d),c.appendChild(e),c.appendChild(f),!0===b&&c.classList.add("completed"),c}function AddTodo(a){return a.preventDefault(),!!todoInput.value&&void(PlaySong("add"),todoList.appendChild(CreateTodoDiv(todoInput.value)),SaveTodo(todoInput.value),todoInput.value="",UpdateTitle(!0))}function HandlerActions(a){var b,c=a.target,d=c.closest("div.todo");return"delete"===c.getAttribute("data-action")?(b=_toConsumableArray(d.parentNode.children).indexOf(d),d.classList.add("fall"),PlaySong("remove"),DeleteTodo(d),DeleteCompletedTodo(b),d.classList.contains("completed")||UpdateTitle(!1),d.addEventListener("transitionend",function(){d.remove()})):void("completed"===c.getAttribute("data-action")&&(b=_toConsumableArray(d.parentNode.children).indexOf(d),d.classList.toggle("completed")?(SaveCompletedTodo(b),UpdateTitle(!1)):(DeleteCompletedTodo(b),UpdateTitle(!0))))}function FilterTodo(a){var b=todoList.childNodes;b.forEach(function(b){switch(a.target.value){case"all":b.style.display="flex";break;case"completed":b.style.display=b.classList.contains("completed")?"flex":"none";break;case"uncompleted":b.style.display=b.classList.contains("completed")?"none":"flex";}})}function SaveTodo(a){var b=[];localStorage.getItem("todos")&&(b=JSON.parse(localStorage.getItem("todos"))),b.push(a),localStorage.setItem("todos",JSON.stringify(b))}function DeleteTodo(a){var b=[];localStorage.getItem("todos")&&(b=JSON.parse(localStorage.getItem("todos")));var c=a.children[0].innerText;b.splice(b.indexOf(c),1),localStorage.setItem("todos",JSON.stringify(b))}function SaveCompletedTodo(a){var b=[];localStorage.getItem("completeds")&&(b=JSON.parse(localStorage.getItem("completeds"))),b.push(a),localStorage.setItem("completeds",JSON.stringify(b))}function DeleteCompletedTodo(a){var b=[];localStorage.getItem("completeds")&&(b=JSON.parse(localStorage.getItem("completeds"))),b.splice(b.indexOf(a),1),localStorage.setItem("completeds",JSON.stringify(b))}function GetTodos(){var a=[],b=[];localStorage.getItem("todos")&&(a=JSON.parse(localStorage.getItem("todos"))),localStorage.getItem("completeds")?(b=JSON.parse(localStorage.getItem("completeds")),document.title="".concat(a.length-b.length," Open tasks")):document.title="0 Open task",a.forEach(function(a,c){-1===b.indexOf(c)?todoList.appendChild(CreateTodoDiv(a)):todoList.appendChild(CreateTodoDiv(a,!0))})}document.addEventListener("DOMContentLoaded",GetTodos),todoButton.addEventListener("click",AddTodo),todoList.addEventListener("click",HandlerActions),filterOption.addEventListener("change",FilterTodo);